(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{412:function(A,t,a){A.exports=a.p+"assets/img/zoom.9e568f4d.jpg"},422:function(A,t,a){A.exports=a.p+"assets/img/color_mask_image.b5a6373b.png"},430:function(A,t,a){A.exports=a.p+"assets/img/original_image.6b641a6c.png"},451:function(A,t){A.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAoAAAAFACAYAAAAszc0KAAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAAoCgAwAEAAAAAQAAAUAAAAAAnCk5iQAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAEuVJREFUeAHt3eFqW+cWBFC75P1fWXXAhkDsIFln5DmaVSj0pvb23mu+H4PS3r6+vLxc3v70BwECBAgQIECAwIjAfyN3OpMAAQIECBAgQOBdQAH0FAgQIECAAAECYwIK4FjgziVAgAABAgQIKIDeAAECBAgQIEBgTEABHAvcuQQIECBAgAABBdAbIECAAAECBAiMCSiAY4E7lwABAgQIECCgAHoDBAgQIECAAIExAQVwLHDnEiBAgAABAgQUQG+AAAECBAgQIDAmoACOBe5cAgQIECBAgIAC6A0QIECAAAECBMYEFMCxwJ1LgAABAgQIEFAAvQECBAgQIECAwJiAAjgWuHMJECBAgAABAgqgN0CAAAECBAgQGBNQAMcCdy4BAgQIECBAQAH0BggQIECAAAECYwIK4FjgziVAgAABAgQIKIDeAAECBAgQIEBgTEABHAvcuQQIECBAgAABBdAbIECAAAECBAiMCSiAY4E7lwABAgQIECCgAHoDBAgQIECAAIExAQVwLHDnEiBAgAABAgQUQG+AAAECBAgQIDAmoACOBe5cAgQIECBAgIAC6A0QIECAAAECBMYEFMCxwJ1LgAABAgQIEFAAvQECBAgQIECAwJiAAjgWuHMJECBAgAABAgqgN0CAAAECBAgQGBNQAMcCdy4BAgQIECBAQAH0BggQIECAAAECYwIK4FjgziVAgAABAgQIKIDeAAECBAgQIEBgTEABHAvcuQQIECBAgAABBdAbIECAAAECBAiMCSiAY4E7lwABAgQIECCgAHoDBAgQIECAAIExAQVwLHDnEiBAgAABAgQUQG+AAAECBAgQIDAmoACOBe5cAgQIECBAgIAC6A0QIECAAAECBMYEFMCxwJ1LgAABAgQIEFAAvQECBAgQIECAwJiAAjgWuHMJECBAgAABAgqgN0CAAAECBAgQGBNQAMcCdy4BAgQIECBAQAH0BggQIECAAAECYwIK4FjgziVAgAABAgQIKIDeAAECBAgQIEBgTEABHAvcuQQIECBAgAABBdAbIECAAAECBAiMCSiAY4E7lwABAgQIECCgAHoDBAgQIECAAIExAQVwLHDnEiBAgAABAgQUQG+AAAECBAgQIDAmoACOBe5cAgQIECBAgIAC6A0QIECAAAECBMYEFMCxwJ1LgAABAgQIEFAAvQECBAgQIECAwJiAAjgWuHMJECBAgAABAgqgN0CAAAECBAgQGBNQAMcCdy4BAgQIECBAQAH0BggQIECAAAECYwIK4FjgziVAgAABAgQIKIDeAAECBAgQIEBgTEABHAvcuQQIECBAgAABBdAbIECAAAECBAiMCSiAY4E7lwABAgQIECCgAHoDBAgQIECAAIExAQVwLHDnEiBAgAABAgQUQG+AAAECBAgQIDAmoACOBe5cAgQIECBAgIAC6A0QIECAAAECBMYEFMCxwJ1LgAABAgQIEFAAvQECBAgQIECAwJiAAjgWuHMJECBAgAABAgqgN0CAAAECBAgQGBNQAMcCdy4BAgQIECBAQAH0BggQIECAAAECYwIK4FjgziVAgAABAgQIKIDeAAECBAgQIEBgTEABHAvcuQQIECBAgAABBdAbIECAAAECBAiMCSiAY4E7lwABAgQIECCgAHoDBAgQIECAAIExAQVwLHDnEiBAgAABAgQUQG+AAAECBAgQIDAmoACOBe5cAgQIECBAgIAC6A0QIECAAAECBMYEFMCxwJ1LgAABAgQIEFAAvQECBAgQIECAwJiAAjgWuHMJECBAgAABAgqgN0CAAAECBAgQGBNQAMcCdy4BAgQIECBAQAH0BggQIECAAAECYwIK4FjgziVAgAABAgQIKIDeAAECBAgQIEBgTEABHAvcuQQIECBAgAABBdAbIECAAAECBAiMCSiAY4E7lwABAgQIECCgAHoDBAgQIECAAIExAQVwLHDnEiBAgAABAgQUQG+AAAECBAgQIDAmoACOBe5cAgQIECBAgIAC6A0QIECAAAECBMYEFMCxwJ1LgAABAgQIEFAAvQECBAgQIECAwJiAAjgWuHMJECBAgAABAgqgN0CAAAECBAgQGBNQAMcCdy4BAgQIECBAQAH0BggQIECAAAECYwIK4FjgziVAgAABAgQIKIDeAAECBAgQIEBgTODX2L3OJUCAAAECBIoFXl9f/9rucrn89Wt+4T4BnwDe5+e7CRAgQIAAgYMEPit/v0d/9esH/djJMQrgZOyOJkCAAAECBJYFFMDl9N1OgAABAgQITAoogJOxO5oAAQIECBBYFlAAl9N3OwECBAgQOIGAfwnk+JAUwONNTSRAgAABAgRuFPjqX/RQ/m6EvPLLFcAroXwZAQIECBAgkBFQ/jKu/5qqAP5Lx98jQIAAAQIECDyhgAL4hKE6iQABAgQInEXgq0//zrL/WfdUAM+anL0JECBAgAABAt8UUAC/CefbCBAgQIAAgfsEfPp3n989360A3qPnewkQIECAAAECJxRQAE8YmpUJECBAgAABAvcIKID36PleAgQIECBA4FsCfvv3W2yHfZMCeBilQQQIECBAgACBcwgogOfIyZYECBAgQIAAgcMEFMDDKA0iQIAAAQIErhHw27/XKGW/RgHM+ppOgAABAgQIEKgTUADrIrEQAQIECBB4XgGf/nVkqwB25GALAgQIECBA4A+By+Xyx//yl0cLKIBHi5pHgAABAgQIECgXUADLA7IeAQIECBAgQOBoAQXwaFHzCBAgQIAAAQLlAgpgeUDWI0CAAAECBAgcLaAAHi1qHgECBAgQIECgXEABLA/IegQIECBAgACBowUUwKNFzSNAgAABAgQIlAsogOUBWY8AAQIECCwK+D+MzqauAGZ9TSdAgAABAgTeBZS6nqegAPZkYRMCBAgQIECAwEMEFMCHMPshBAgQIECAwC0C/lNwt2jd/rUK4O1mvoMAAQIECBAgcGoBBfDU8VmeAAECBAicQ+CWf/7Pp3/5TBXAvLGfQIAAAQIE5gWUuq4noAB25WEbAgQIECAwLaAoPib+X4/5MX4KAQIECBAgsCrw2W//fhS9z/7eqtMj7/YJ4CO1/SwCBAgQIEDg5aP8ofg5AQXw5+z9ZAIECBAgMCngU7+fj10B/PkMbECAAAECBJ5a4NpP/K79uqfGetBxCuCDoP0YAgQIECCwLHBNufPJ4ONeiAL4OGs/iQABAgQIEHgX+KrsffXr4I4VeH0bdzl2pGkECBAgQIAAgc8FPgre708EP/768698KyhvX+OPjIACmHE1lQABAgQIECBQK+C3gGujsRgBAgQIECBAICOgAGZcTSVAgAABAgQI1AoogLXRWIwAAQIECBAgkBFQADOuphIgQIAAAQIEagUUwNpoLEaAAAECBAgQyAgogBlXUwkQIECAAAECtQIKYG00FiNAgAABAgQIZAQUwIyrqQQIECBAgACBWgEFsDYaixEgQIAAAQIEMgIKYMbVVAIECBAgQIBArYACWBuNxQgQIECAAAECGQEFMONqKgECBAgQIECgVkABrI3GYgQIECBAgACBjIACmHE1lQABAgQIECBQK6AA1kZjMQIECBAgQIBARkABzLiaSoAAAQIECBCoFVAAa6OxGAECBAgQIEAgI6AAZlxNJUCAAAECBAjUCiiAtdFYjAABAgQIECCQEVAAM66mEiBAgAABAgRqBRTA2mgsRoAAAQIECBDICCiAGVdTCRAgQIAAAQK1AgpgbTQWI0CAAAECBAhkBBTAjKupBAgQIECAAIFaAQWwNhqLESBAgAABAgQyAgpgxtVUAgQIECBAgECtgAJYG43FCBAgQIAAAQIZAQUw42oqAQIECBAgQKBWQAGsjcZiBAgQIECAAIGMgAKYcTWVAAECBAgQIFAroADWRmMxAgQIECBAgEBGQAHMuJpKgAABAgQIEKgVUABro7EYAQIECBAgQCAjoABmXE0lQIAAAQIECNQKKIC10ViMAAECBAgQIJARUAAzrqYSIECAAAECBGoFFMDaaCxGgAABAgQIEMgIKIAZV1MJECBAgAABArUCCmBtNBYjQIAAAQIECGQEFMCMq6kECBAgQIAAgVoBBbA2GosRIECAAAECBDICCmDG1VQCBAgQIECAQK2AAlgbjcUIECBAgAABAhkBBTDjaioBAgQIECBAoFZAAayNxmIECBAgQIAAgYyAAphxNZUAAQIECBAgUCugANZGYzECBAgQIECAQEZAAcy4mkqAAAECBAgQqBVQAGujsRgBAgQIECBAICOgAGZcTSVAgAABAgQI1AoogLXRWIwAAQIECBAgkBFQADOuphIgQIAAAQIEagUUwNpoLEaAAAECBAgQyAgogBlXUwkQIECAAAECtQIKYG00FiNAgAABAgQIZAQUwIyrqQQIECBAgACBWgEFsDYaixEgQIAAAQIEMgIKYMbVVAIECBAgQIBArYACWBuNxQgQIECAAAECGQEFMONqKgECBAgQIECgVkABrI3GYgQIECBAgACBjIACmHE1lQABAgQIECBQK6AA1kZjMQIECBAgQIBARkABzLiaSoAAAQIECBCoFVAAa6OxGAECBAgQIEAgI6AAZlxNJUCAAAECBAjUCiiAtdFYjAABAgQIECCQEVAAM66mEiBAgAABAgRqBRTA2mgsRoAAAQIECBDICCiAGVdTCRAgQIAAAQK1AgpgbTQWI0CAAAECBAhkBBTAjKupBAgQIECAAIFaAQWwNhqLESBAgAABAgQyAgpgxtVUAgQIECBAgECtgAJYG43FCBAgQIAAAQIZAQUw42oqAQIECBAgQKBWQAGsjcZiBAgQIECAAIGMgAKYcTWVAAECBAgQIFAroADWRmMxAgQIECBAgEBGQAHMuJpKgAABAgQIEKgVUABro7EYAQIECBAgQCAjoABmXE0lQIAAAQIECNQKKIC10ViMAAECBAgQIJARUAAzrqYSIECAAAECBGoFFMDaaCxGgAABAgQIEMgIKIAZV1MJECBAgAABArUCCmBtNBYjQIAAAQIECGQEFMCMq6kECBAgQIAAgVoBBbA2GosRIECAAAECBDICCmDG1VQCBAgQIECAQK2AAlgbjcUIECBAgAABAhkBBTDjaioBAgQIECBAoFZAAayNxmIECBAgQIAAgYyAAphxNZUAAQIECBAgUCugANZGYzECBAgQIECAQEZAAcy4mkqAAAECBAgQqBVQAGujsRgBAgQIECBAICOgAGZcTSVAgAABAgQI1AoogLXRWIwAAQIECBAgkBFQADOuphIgQIAAAQIEagUUwNpoLEaAAAECBAgQyAgogBlXUwkQIECAAAECtQIKYG00FiNAgAABAgQIZAQUwIyrqQQIECBAgACBWgEFsDYaixEgQIAAAQIEMgIKYMbVVAIECBAgQIBArYACWBuNxQgQIECAAAECGQEFMONqKgECBAgQIECgVkABrI3GYgQIECBAgACBjIACmHE1lQABAgQIECBQK6AA1kZjMQIECBAgQIBARkABzLiaSoAAAQIECBCoFVAAa6OxGAECBAgQIEAgI6AAZlxNJUCAAAECBAjUCiiAtdFYjAABAgQIECCQEVAAM66mEiBAgAABAgRqBRTA2mgsRoAAAQIECBDICCiAGVdTCRAgQIAAAQK1AgpgbTQWI0CAAAECBAhkBBTAjKupBAgQIECAAIFaAQWwNhqLESBAgAABAgQyAgpgxtVUAgQIECBAgECtgAJYG43FCBAgQIAAAQIZAQUw42oqAQIECBAgQKBWQAGsjcZiBAgQIECAAIGMgAKYcTWVAAECBAgQIFAroADWRmMxAgQIECBAgEBGQAHMuJpKgAABAgQIEKgVUABro7EYAQIECBAgQCAjoABmXE0lQIAAAQIECNQKKIC10ViMAAECBAgQIJARUAAzrqYSIECAAAECBGoFFMDaaCxGgAABAgQIEMgIKIAZV1MJECBAgAABArUCCmBtNBYjQIAAAQIECGQEFMCMq6kECBAgQIAAgVoBBbA2GosRIECAAAECBDICCmDG1VQCBAgQIECAQK2AAlgbjcUIECBAgAABAhkBBTDjaioBAgQIECBAoFZAAayNxmIECBAgQIAAgYyAAphxNZUAAQIECBAgUCugANZGYzECBAgQIECAQEZAAcy4mkqAAAECBAgQqBVQAGujsRgBAgQIECBAICOgAGZcTSVAgAABAgQI1AoogLXRWIwAAQIECBAgkBFQADOuphIgQIAAAQIEagUUwNpoLEaAAAECBAgQyAgogBlXUwkQIECAAAECtQIKYG00FiNAgAABAgQIZAQUwIyrqQQIECBAgACBWgEFsDYaixEgQIAAAQIEMgIKYMbVVAIECBAgQIBArYACWBuNxQgQIECAAAECGQEFMONqKgECBAgQIECgVkABrI3GYgQIECBAgACBjIACmHE1lQABAgQIECBQK6AA1kZjMQIECBAgQIBARuB/0j01jrgTSzIAAAAASUVORK5CYII="},452:function(A,t){A.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAoAAAAFACAYAAAAszc0KAAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAAoCgAwAEAAAAAQAAAUAAAAAAnCk5iQAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAGpVJREFUeAHt3cuPZNddB/DT1a+ZnvfD47cncSKEAeFFpBAhAQsQQjyEeC2IhGCDBFLA2YDEjhVrtmy84R9AgLICESFAsoQEIhArgSSWR7HHThg/enqmp7u6m3PuVGXaPd0zPf2rHvLz+ZTlflTf+s05n99ZfHVu3bpzpZSd+r8HAQIECBAgQIBAJwKjTuZpmgQIECBAgAABAhMBAdBSIECAAAECBAh0JiAAdtZw0yVAgAABAgQICIDWAAECBAgQIECgMwEBsLOGmy4BAgQIECBAQAC0BggQIECAAAECnQkIgJ013HQJECBAgAABAgKgNUCAAAECBAgQ6ExAAOys4aZLgAABAgQIEBAArQECBAgQIECAQGcCAmBnDTddAgQIECBAgIAAaA0QIECAAAECBDoTEAA7a7jpEiBAgAABAgQEQGuAAAECBAgQINCZgADYWcNNlwABAgQIECAgAFoDBAgQIECAAIHOBATAzhpuugQIECBAgAABAdAaIECAAAECBAh0JiAAdtZw0yVAgAABAgQICIDWAAECBAgQIECgMwEBsLOGmy4BAgQIECBAQAC0BggQIECAAAECnQkIgJ013HQJECBAgAABAgKgNUCAAAECBAgQ6ExAAOys4aZLgAABAgQIEBAArQECBAgQIECAQGcCAmBnDTddAgQIECBAgIAAaA0QIECAAAECBDoTEAA7a7jpEiBAgAABAgQEQGuAAAECBAgQINCZgADYWcNNlwABAgQIECAgAFoDBAgQIECAAIHOBATAzhpuugQIECBAgAABAdAaIECAAAECBAh0JiAAdtZw0yVAgAABAgQICIDWAAECBAgQIECgMwEBsLOGmy4BAgQIECBAQAC0BggQIECAAAECnQkIgJ013HQJECBAgAABAgKgNUCAAAECBAgQ6ExAAOys4aZLgAABAgQIEBAArQECBAgQIECAQGcCAmBnDTddAgQIECBAgIAAaA0QIECAAAECBDoTEAA7a7jpEiBAgAABAgQEQGuAAAECBAgQINCZgADYWcNNlwABAgQIECAgAFoDBAgQIECAAIHOBATAzhpuugQIECBAgAABAdAaIECAAAECBAh0JiAAdtZw0yVAgAABAgQICIDWAAECBAgQIECgMwEBsLOGmy4BAgQIECBAQAC0BggQIECAAAECnQkIgJ013HQJECBAgAABAgKgNUCAAAECBAgQ6ExAAOys4aZLgAABAgQIEBAArQECBAgQIECAQGcCAmBnDTddAgQIECBAgIAAaA0QIECAAAECBDoTEAA7a7jpEiBAgAABAgQEQGuAAAECBAgQINCZgADYWcNNlwABAgQIECAgAFoDBAgQIECAAIHOBATAzhpuugQIECBAgAABAdAaIECAAAECBAh0JiAAdtZw0yVAgAABAgQICIDWAAECBAgQIECgMwEBsLOGmy4BAgQIECBAQAC0BggQIECAAAECnQkIgJ013HQJECBAgAABAgKgNUCAAAECBAgQ6ExAAOys4aZLgAABAgQIEBAArQECBAgQIECAQGcCAmBnDTddAgQIECBAgIAAaA0QIECAAAECBDoTEAA7a7jpEiBAgAABAgQEQGuAAAECBAgQINCZgADYWcNNlwABAgQIECAgAFoDBAgQ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AQEwV7+MlgABAgQIECAQFhAAw4QKECBAgAABAgRyCQiAufpltAQIECBAgACBsIAAGCZUgAABAgQIECCQS0AAzNUvoyVAgAABAgQIhAUEwDChAgQIECBAgACBXAICYK5+GS0BAgQIECBAICwgAIYJFSBAgAABAgQI5BIQAHP1y2gJECBAgAABAmEBATBMqAABAgQIECBAIJeAAJirX0ZLgAABAgQIEAgLCIBhQgUIECBAgAABArkEBMBc/TJaAgQIECBAgEBYQAAMEypAgAABAgQIEMglIADm6pfREiBAgAABAgTCAgJgmFABAgQIECBAgEAuAQEwV7+MlgABAgQIECAQFhAAw4QKECBAgAABAgRyCQiAufpltAQIECBAgACBsIAAGCZUgAABAgQIECCQS0AAzNUvoyVAgAABAgQIhAUEwDChAgQIECBAgACBXAICYK5+GS0BAgQIECBAICwgAIYJFSBAgAABAgQI5BIQAHP1y2gJECBAgAABAmEBATBMqAABAgQIECBAIJeAAJirX0ZLgAABAgQIEAgLCIBhQgUIECBAgAABArkEBMBc/TJaAgQIECBAgEBYQAAMEypAgAABAgQIEMglIADm6pfREiBAgAABAgTCAgJgmFABAgQIECBAgEAuAQEwV7+MlgABAgQIECAQFhAAw4QKECBAgAABAgRyCQiAufpltAQIECBAgACBsIAAGCZUgAABAgQIECCQS0AAzNUvoyVAgAABAgQIhAUEwDChAgQIECBAgACBXAICYK5+GS0BAgQIECBAICwgAIYJFSBAgAABAgQI5BIQAHP1y2gJECBAgAABAmEBATBMqAABAgQIECBAIJeAAJirX0ZLgAABAgQIEAgLCIBhQgUIECBAgAABArkEBMBc/TJaAgQIECBAgEBYQAAMEypAgAABAgQIEMglIADm6pfREiBAgAABAgTCAgJgmFABAgQIECBAgEAuAQEwV7+MlgABAgQIECAQFhAAw4QKECBAgAABAgRyCQiAufpltAQIECBAgACBsIAAGCZUgAABAgQIECCQS0AAzNUvoyVAgAABAgQIhAUEwDChAgQIECBAgACBXAICYK5+GS0BAgQIECBAICwgAIYJFSBAgAABAgQI5BIQAHP1y2gJECBAgAABAmEBATBMqAABAgQIECBAIJeAAJirX0ZLgAABAgQIEAgLCIBhQgUIECBAgAABArkEBMBc/TJaAgQIECBAgEBYQAAMEypAgAABAgQIEMglIADm6pfREiBAgAABAgTCAgJgmFABAgQIECBAgEAuAQEwV7+MlgABAgQIECAQFhAAw4QKECBAgAABAgRyCQiAufpltAQIECBAgACBsIAAGCZUgAABAgQIECCQS0AAzNUvoyVAgAABAgQIhAUEwDChAgQIECBAgACBXAICYK5+GS0BAgQIECBAICwgAIYJFSBAgAABAgQI5BIQAHP1y2gJECBAgAABAmEBATBMqAABAgQIECBAIJeAAJirX0ZLgAABAgQIEAgLCIBhQgUIECBAgAABArkEBMBc/TJaAgQIECBAgEBYQAAMEypAgAABAgQIEMglIADm6pfREiBAgAABAgTCAgJgmFABAgQIECBAgEAuAQEwV7+MlgABAgQIECAQFhAAw4QKECBAgAABAgRyCQiAufpltAQIECBAgACBsIAAGCZUgAABAgQIECCQS0AAzNUvoyVAgAABAgQIhAUEwDChAgQIECBAgACBXAICYK5+GS0BAgQIECBAICwgAIYJFSBAgAABAgQI5BIQAHP1y2gJECBAgAABAmEBATBMqAABAgQIECBAIJeAAJirX0ZLgAABAgQIEAgLCIBhQgUIECBAgAABArkEBMBc/TJaAgQIECBAgEBYQAAMEypAgAABAgQIEMglIADm6pfREiBAgAABAgTCAgJgmFABAgQIECBAgEAuAQEwV7+MlgABAgQIECAQFhAAw4QKECBAgAABAgRyCQiAufpltAQIECBAgACBsIAAGCZUgAABAgQIECCQS0AAzNUvoyVAgAABAgQIhAUEwDChAgQIECBAgACBXAICYK5+GS0BAgQIECBAICwgAIYJFSBAgAABAgQI5BIQAHP1y2gJECBAgAABAmEBATBMqAABAgQIECBAIJeAAJirX0ZLgAABAgQIEAgLCIBhQgUIECBAgAABArkEBMBc/TJaAgQIECBAgEBYQAAMEypAgAABAgQIEMglIADm6pfREiBAgAABAgTCAgJgmFABAgQIECBAgEAuAQEwV7+MlgABAgQIECAQFhAAw4QKECBAgAABAgRyCQiAufpltAQIECBAgACBsIAAGCZUgAABAgQIECCQS0AAzNUvoyVAgAABAgQIhAUEwDChAgQIECBAgACBXAICYK5+GS0BAgQIECBAICwgAIYJFSBAgAABAgQI5BIQAHP1y2gJECBAgAABAmEBATBMqAABAgQIECBAIJeAAJirX0ZLgAABAgQIEAgLCIBhQgUIECBAgAABArkEBMBc/TJaAgQIECBAgEBYQAAMEypAgAABAgQIEMglIADm6pfREiBAgAABAgTCAgJgmFABAgQIECBAgEAuAQEwV7+MlgABAgQIECAQFhAAw4QKECBAgAABAgRyCfwfrDMbufKlENIAAAAASUVORK5CYII="},502:function(A,t,a){"use strict";a.r(t);var s=a(2),n=Object(s.a)({},(function(){var A=this,t=A.$createElement,s=A._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":A.$parent.slotKey}},[s("h2",{attrs:{id:"python-espnetをオリジナルデータで学習する-データ生成編"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#python-espnetをオリジナルデータで学習する-データ生成編"}},[A._v("#")]),A._v(" Python + ESPNetをオリジナルデータで学習する(データ生成編)")]),A._v(" "),s("p",[A._v("セマンティックセグメンテーションの中で軽いモデルであるESPNetv2を実装します．"),s("br"),A._v("\n本稿ではCityscapesデータセットから人のみを抽出して，仮のオリジナルデータで学習に向けて，データ生成を実施します．"),s("br"),A._v("\n今回はGoogle ColabとGoogle Driveを連携させて，notebook形式で実行してます．"),s("br")]),A._v(" "),s("blockquote",[s("p",[A._v("Google Colaboratory（以下Google Colab）は、Google社が無料で提供している機械学習の教育や研究用の開発環境です。開発環境はJupyter Notebookに似たインターフェースを持ち、Pythonの主要なライブラリがプリインストールされています。"),s("br"),A._v("\n引用元："),s("a",{attrs:{href:"https://interface.cqpub.co.jp/ail01/",target:"_blank",rel:"noopener noreferrer"}},[A._v("Google Colabの使い方"),s("OutboundLink")],1)])]),A._v(" "),s("p",[A._v("最終的に，人以外の背景を着色して，zoomのバーチャル背景機能のようなクロマキー合成を実装したいです．"),s("br"),A._v(" "),s("img",{attrs:{src:a(412),alt:""}})]),A._v(" "),s("h2",{attrs:{id:"作業ディレクトリのファイル構成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作業ディレクトリのファイル構成"}},[A._v("#")]),A._v(" 作業ディレクトリのファイル構成")]),A._v(" "),s("p",[A._v("ここでは，作業ディレクトリのsegmentation/EdgeNets/vision_datasetsのファイル構成を以下に示します．")]),A._v(" "),s("div",{staticClass:"language-init extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[A._v("segmentation/EdgeNets/vision_datasets\n├── /cityscapes\n├── /human_city <- 仮オリジナルデータ\n│   ├── train.txt\n│   ├── val.txt\n│   ├── /images\n│   │   ├── /train\n│   │   │   └── オリジナル画像\n│   │   └── /val\n│   │       └── オリジナル画像\n│   └── /annotations\n│       ├── /train\n│       │   └── マスキング画像\n│       └── /val\n│           └── マスキング画像\n│ \n└── create_data.ipynb <- データ生成用ノートブック\n")])])]),s("h2",{attrs:{id:"オリジナルデータの学習データセット"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#オリジナルデータの学習データセット"}},[A._v("#")]),A._v(" オリジナルデータの学習データセット")]),A._v(" "),s("p",[A._v("今回はCityscapesデータセットから人だけを抽出して，仮オリジナルデータとします．"),s("br"),A._v("\nオリジナルデータでESPNetv2を学習する場合は，データセットのファイル構成は以下の通りです．"),s("br"),A._v("\nここでは，データセット名前をhuman_cityとしています．"),s("br")]),A._v(" "),s("div",{staticClass:"language-init extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[A._v("/human_city\n├── train.txt\n├── /images\n│   ├── /train\n│   │   └── オリジナル画像\n│   └── /val\n│       └── オリジナル画像\n├── val.txt\n└── /annotations\n    ├── /train\n    │   └── マスキング画像\n    └── /val\n        └── マスキング画像\n")])])]),s("p",[A._v("オリジナル画像は実際の風景画像で，マスキング画像はクラスのIDに応じたRGBでマスキングした画像です．"),s("br"),A._v("\n例として，背景はRGB=(0, 0, 0)，人のクラスIDが1とするならば人の領域はRGB=(1, 1, 1)，車のクラスIDが2とするならば車の領域はRGB=(2, 2, 2)として，マスキング画像を作成する．"),s("br"),A._v("\nRGB=(0, 0, 0)の領域とRGB=(1, 1, 1)の領域は肉眼では判別不可能なので，最初は確認のためRGB=(0, 0, 255)など目立つ色で作成して，学習用に色を置換する方が個人的にお勧めします．"),s("br")]),A._v(" "),s("p",[A._v("オリジナル画像"),s("br"),A._v(" "),s("img",{attrs:{src:a(430),alt:""}}),s("br")]),A._v(" "),s("p",[A._v("人をRGB=(1, 1, 1)のマスキング画像(学習用)"),s("br"),A._v("\n※肉眼じゃわからん・・・\n"),s("img",{attrs:{src:a(451),alt:""}}),s("br")]),A._v(" "),s("p",[A._v("人をRGB=(255, 0, 0)のマスキング画像(確認用)"),s("br"),A._v(" "),s("img",{attrs:{src:a(452),alt:""}})]),A._v(" "),s("h2",{attrs:{id:"仮オリジナルデータの生成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#仮オリジナルデータの生成"}},[A._v("#")]),A._v(" 仮オリジナルデータの生成")]),A._v(" "),s("p",[A._v("Cityscapesデータセットから人だけを抽出して，仮オリジナルデータを生成します．"),s("br"),A._v("\nCityscapesデータセットのダウンロードは，"),s("a",{attrs:{href:"https://hirasu1231.github.io/hamlet_engineer/posts/2021/03/15/segmentation01.html",target:"_blank",rel:"noopener noreferrer"}},[A._v("Python, ESPNetでCityscapesデータセットでSemantic Segmentationの学習を実施する"),s("OutboundLink")],1),A._v("を参照ください．")]),A._v(" "),s("h3",{attrs:{id:"作業ディレクトリの移動"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作業ディレクトリの移動"}},[A._v("#")]),A._v(" 作業ディレクトリの移動")]),A._v(" "),s("p",[A._v("作業ディレクトリは，Cityscapesデータセットのダウンロードで自動で生成される/EdgeNets/vision_datasetsとしています．")]),A._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# Google ColabとGoogle Driveを連携")]),A._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("from")]),A._v(" google"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("colab "),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("import")]),A._v(" drive\ndrive"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("mount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[A._v("'/content/drive'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v("\n")])])]),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# ディレクトリの移動")]),A._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("%")]),A._v("cd "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("/")]),A._v("content"),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("/")]),A._v("drive"),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("/")]),A._v("My\\ Drive"),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("/")]),A._v("segmentation"),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("/")]),A._v("EdgeNets"),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("/")]),A._v("vision_datasets\n")])])]),s("h3",{attrs:{id:"cityscapesデータセットの整理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cityscapesデータセットの整理"}},[A._v("#")]),A._v(" Cityscapesデータセットの整理")]),A._v(" "),s("p",[A._v("仮オリジナルデータの生成について，Cityscapesデータセットからオリジナル画像とカラーマスキング画像を使用します．"),s("br"),A._v("\nCityscapesデータセットは，オリジナル画像とカラーマスキング画像は，以下の画像名となっています．"),s("br")]),A._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[A._v("オリジナル画像：/cityscapes/leftImg8bit/train or val/＊/＊_leftImg8bit.png\nカラーマスキング画像：/cityscapes/gtFine/train or val/＊/＊_gtFine_color.png\n")])])]),s("p",[A._v("オリジナル画像"),s("br"),A._v(" "),s("img",{attrs:{src:a(430),alt:""}}),s("br")]),A._v(" "),s("p",[A._v("カラーマスキング画像"),s("br"),A._v(" "),s("img",{attrs:{src:a(422),alt:""}})]),A._v(" "),s("h3",{attrs:{id:"入力画像のリスト作成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#入力画像のリスト作成"}},[A._v("#")]),A._v(" 入力画像のリスト作成")]),A._v(" "),s("p",[A._v("画像を読み込ませるために，画像パスリストのtxtファイルも作成する必要があります．(train.txt, val.txt)")]),A._v(" "),s("div",{staticClass:"language-init extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[A._v("# train.txt, val.txt\n# オリジナル画像, マスキング画像\ntrain/rgb/zurich_000072_000019_leftImg8bit.png,train/label/zurich_000072_000019_gtFine_color.png\ntrain/rgb/zurich_000003_000019_leftImg8bit.png,train/label/zurich_000003_000019_gtFine_color.png\ntrain/rgb/zurich_000116_000019_leftImg8bit.png,train/label/zurich_000116_000019_gtFine_color.png\ntrain/rgb/zurich_000119_000019_leftImg8bit.png,train/label/zurich_000119_000019_gtFine_color.png\ntrain/rgb/zurich_000032_000019_leftImg8bit.png,train/label/zurich_000032_000019_gtFine_color.png\n")])])]),s("h3",{attrs:{id:"仮オリジナルデータ生成の工程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#仮オリジナルデータ生成の工程"}},[A._v("#")]),A._v(" 仮オリジナルデータ生成の工程")]),A._v(" "),s("p",[A._v("人を抽出する工程は，カラーマスキング画像の色を，人以外をBGR(0, 0, 0)，人をBGR(1, 1, 1)に置換して実施してます．"),s("br"),A._v("\nカラー画像で特定の色を置換する場合は，本サイトの「"),s("a",{attrs:{href:"https://hirasu1231.github.io/hamlet_engineer/posts/2021/03/16/color-replace.html",target:"_blank",rel:"noopener noreferrer"}},[A._v("Python, OpenCVで指定した色の抽出と別の色への置換を実装する"),s("OutboundLink")],1),A._v("」を参照ください．"),s("br"),A._v("\n以下のコードでは一通りの工程をdef文でまとめました．")]),A._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("import")]),A._v(" os\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("import")]),A._v(" glob\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("import")]),A._v(" shutil\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("import")]),A._v(" cv2\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("import")]),A._v(" numpy "),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("as")]),A._v(" np\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# 学習データセットのディレクトリの作成")]),A._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("def")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[A._v("make_dataset_dir")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("dataset_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(":")]),A._v("\n    os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("makedirs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[A._v("'{}/images/train/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[A._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("dataset_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" exist_ok"),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[A._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# 訓練用オリジナル画像")]),A._v("\n    os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("makedirs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[A._v("'{}/annotations/train/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[A._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("dataset_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" exist_ok"),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[A._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# 訓練用マスキング画像")]),A._v("\n    os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("makedirs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[A._v("'{}/images/val/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[A._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("dataset_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" exist_ok"),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[A._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# 評価用オリジナル画像")]),A._v("\n    os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("makedirs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[A._v("'{}/annotations/val/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[A._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("dataset_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" exist_ok"),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[A._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# 評価用マスキング画像")]),A._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# オリジナル画像をコピー")]),A._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("def")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[A._v("copy_org_image")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("color_image_path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" data_type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" dataset_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(":")]),A._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# カラーマスキング画像の名前")]),A._v("\n    color_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("basename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("color_image_path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# データのディレクトリ名(データを取得した都市名)")]),A._v("\n    city_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" color_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("split"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[A._v("'_'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[A._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("]")]),A._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# オリジナル画像の名前とパス")]),A._v("\n    org_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" color_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("replace"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[A._v("'_gtFine_color.png'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[A._v("'_leftImg8bit.png'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v("\n    org_path "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[A._v("'./cityscapes/leftImg8bit/{0}/{1}/{2}'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[A._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("data_type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" city_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" org_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# オリジナル画像をコピー")]),A._v("\n    shutil"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("copy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("org_path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[A._v("'./{0}/images/{1}/{2}'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[A._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("dataset_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" data_type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" org_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("return")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[A._v("'{0}/{1}'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[A._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("data_type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" org_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# 画像の特定の色を抽出")]),A._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("def")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[A._v("color_extract")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("cv2_img"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" color1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(":")]),A._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# BGRでの色抽出")]),A._v("\n    bgrLower "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" np"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("color1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# 抽出する色の下限(BGR)")]),A._v("\n    bgrUpper "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" np"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("color1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# 抽出する色の上限(BGR)")]),A._v("\n    img_mask "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" cv2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("inRange"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("cv2_img"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" bgrLower"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" bgrUpper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# BGRからマスクを作成")]),A._v("\n    ex_img "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" cv2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("bitwise_and"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("cv2_img"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" cv2_img"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" mask"),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v("img_mask"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# 元画像とマスクを合成")]),A._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("return")]),A._v(" ex_img\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# 画像の特定の色を別の色に置換")]),A._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("def")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[A._v("color_replace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("ex_img"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" color1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" color2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(":")]),A._v("\n    before_color "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" color1\n    after_color "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" color2\n    ex_img"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("[")]),A._v("np"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("where"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("ex_img "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("==")]),A._v(" before_color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[A._v("all")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("axis"),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[A._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("]")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" after_color\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("return")]),A._v(" ex_img\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# 学習用マスキング画像を出力")]),A._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("def")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[A._v("replace_masking")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("cv2_img"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" data_type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" dataset_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" color1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" color2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(":")]),A._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# 学習用マスキング画像を生成")]),A._v("\n    ex_img "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" color_extract"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("cv2_img"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" color1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v("\n    mask_img "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" color_replace"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("ex_img"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" color1"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" color2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# グレースケール化")]),A._v("\n    mask_img_gray "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" cv2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("cvtColor"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("mask_img"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" cv2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("COLOR_BGR2GRAY"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# マスキング画像の出力")]),A._v("\n    color_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("basename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("color_image"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v("\n    mask_path "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[A._v("'./{0}/annotations/{1}/{2}'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[A._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("dataset_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" data_type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" color_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v("\n    cv2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("imwrite"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("mask_path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" mask_img_gray"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("return")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[A._v("'{0}/{1}'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[A._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("data_type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" color_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# パスリストのtxtファイル作成")]),A._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("def")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[A._v("create_txtfile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("txt_path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" txt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" txt_flag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(":")]),A._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# 新規作成")]),A._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("if")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("not")]),A._v(" txt_flag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(":")]),A._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("with")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[A._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("txt_path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" mode"),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[A._v("'w'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("as")]),A._v(" f"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(":")]),A._v("\n            f"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("write"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("txt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# 追記")]),A._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("else")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(":")]),A._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("with")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[A._v("open")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("txt_path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" mode"),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[A._v("'a'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("as")]),A._v(" f"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(":")]),A._v("\n            f"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("write"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("txt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("return")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[A._v("1")]),A._v("\n")])])]),s("h3",{attrs:{id:"仮オリジナルデータ生成の実行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#仮オリジナルデータ生成の実行"}},[A._v("#")]),A._v(" 仮オリジナルデータ生成の実行")]),A._v(" "),s("p",[A._v("以下のコードで仮オリジナルデータ生成を実行します．"),s("br"),A._v(" "),s("a",{attrs:{href:"https://github.com/mcordts/cityscapesScripts/blob/master/cityscapesscripts/helpers/labels.py",target:"_blank",rel:"noopener noreferrer"}},[A._v("cityscapesScripts/cityscapesscripts/helpers/labels.py"),s("OutboundLink")],1),A._v("より人のマスキングのRGBは(220, 20, 60)となります．"),s("br"),A._v("\nカラーマスキング画像を読み込んで，人のRGB=(220, 20, 60)の箇所があれば，学習用データセットとして整形するようにしています．")]),A._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("import")]),A._v(" os\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("import")]),A._v(" glob\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("import")]),A._v(" cv2\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("import")]),A._v(" numpy "),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("as")]),A._v(" np\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# 学習データセットのディレクトリの作成")]),A._v("\ndataset_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[A._v("'human_city'")]),A._v("\nmake_dataset_dir"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("dataset_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# Cityscapes")]),A._v("\ndata_type "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[A._v("'train'")]),A._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# カラーマスキング")]),A._v("\ncolor_images "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" glob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("glob"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[A._v("'./cityscapes/gtFine/{}/*/*_gtFine_color.png'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[A._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("data_type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v("\n    \n"),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# 人のマスキングカラー(BGR)")]),A._v("\nhuman_color "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[A._v("60")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[A._v("20")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[A._v("220")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("]")]),A._v("\nlabel_color "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[A._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[A._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[A._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("]")]),A._v("\n\ntxt_flag "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[A._v("0")]),A._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("for")]),A._v(" color_image "),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("in")]),A._v(" color_images"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(":")]),A._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# カラーマスキング画像の読み込み")]),A._v("\n    img "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" cv2"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("imread"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("color_image"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# 人の色があるか，判定")]),A._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[A._v("if")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[A._v("len")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("img"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("[")]),A._v("np"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),A._v("where"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("img "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("==")]),A._v(" human_color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[A._v("all")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("axis"),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[A._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v(">")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[A._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(":")]),A._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# 学習用マスキング画像を出力")]),A._v("\n        txt_mask_path "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" replace_masking"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("img"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" data_type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" dataset_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" human_color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" label_color"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# オリジナル画像をコピー")]),A._v("\n        txt_org_path "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" copy_org_image"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("color_image"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" data_type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" dataset_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[A._v("# パスリストのtxtファイル作成")]),A._v("\n        txt_path "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[A._v("'./{0}/{1}.txt'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[A._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("dataset_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" data_type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v("\n        txt "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[A._v("'{0},{1}\\n'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[A._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("txt_org_path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" txt_mask_path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v("\n        txt_flag "),s("span",{pre:!0,attrs:{class:"token operator"}},[A._v("=")]),A._v(" create_txtfile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v("(")]),A._v("txt_path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" txt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(",")]),A._v(" txt_flag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[A._v(")")]),A._v("\n")])])]),s("h2",{attrs:{id:"まとめ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#まとめ"}},[A._v("#")]),A._v(" まとめ")]),A._v(" "),s("p",[A._v("Cityscapesデータセットから人のみを抽出して，仮のオリジナルデータで学習に向けて，データ生成を実施しました．"),s("br"),A._v("\n次回からは本稿の仮オリジナルデータでの学習を実施します．")]),A._v(" "),s("h2",{attrs:{id:"参考サイト"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考サイト"}},[A._v("#")]),A._v(" 参考サイト")]),A._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/sacmehta/EdgeNets",target:"_blank",rel:"noopener noreferrer"}},[A._v("sacmehta/EdgeNets"),s("OutboundLink")],1),s("br"),A._v(" "),s("a",{attrs:{href:"https://github.com/sacmehta/EdgeNets/blob/master/README_Segmentation.md",target:"_blank",rel:"noopener noreferrer"}},[A._v("sacmehta/EdgeNets/README_Segmentation.md"),s("OutboundLink")],1),A._v(" "),s("a",{attrs:{href:"https://qiita.com/tokyokuma/items/37b1370ea7c84399fbb9",target:"_blank",rel:"noopener noreferrer"}},[A._v("ESPNetで自作データセットを学習してセグメンテーション"),s("OutboundLink")],1),s("br"),A._v(" "),s("a",{attrs:{href:"https://rikoubou.hatenablog.com/entry/2019/02/21/190310",target:"_blank",rel:"noopener noreferrer"}},[A._v("【python/OpenCV】画像の特定の色を抽出する方法"),s("OutboundLink")],1),s("br"),A._v(" "),s("a",{attrs:{href:"https://qiita.com/pashango2/items/d6dda5f07109ee5b6163",target:"_blank",rel:"noopener noreferrer"}},[A._v("PIL/Pillowで画像の色を高速に置換する"),s("OutboundLink")],1),s("br"),A._v(" "),s("a",{attrs:{href:"http://ni4muraano.hatenablog.com/entry/2017/05/15/000000",target:"_blank",rel:"noopener noreferrer"}},[A._v("【OpenCV】 forループを使わずに指定した色を別の色に変更する"),s("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=n.exports}}]);