<!DOCTYPE html>
<html lang="ja-jp">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Python, ESPNetでオリジナルデータを学習しSemantic Segmentationを実施する(データ生成編) | ハムレット型エンジニアのカンニングノート</title>
    <meta name="generator" content="VuePress 1.8.0">
    <meta name="description" content="Python, ESPNetでCityscapesデータセットから人のみを抽出して，仮のオリジナルデータを生成します．">
    <meta property="article:published_time" content="2021-03-17T00:00:00.000Z">
    <meta property="article:modified_time" content="2021-03-18T10:22:33.000Z">
    <meta property="og:site_name" content="ハムレット型エンジニアのカンニングノート">
    <meta property="og:title" content="Python, ESPNetでオリジナルデータを学習しSemantic Segmentationを実施する(データ生成編)">
    <meta property="og:description" content="Python, ESPNetでCityscapesデータセットから人のみを抽出して，仮のオリジナルデータを生成します．">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://hirasu1231.github.io/hamlet_engineer/posts/2021/03/17/segmentation02.html">
    <meta name="twitter:title" content="Python, ESPNetでオリジナルデータを学習しSemantic Segmentationを実施する(データ生成編)">
    <meta name="twitter:description" content="Python, ESPNetでCityscapesデータセットから人のみを抽出して，仮のオリジナルデータを生成します．">
    <meta name="twitter:url" content="https://hirasu1231.github.io/hamlet_engineer/posts/2021/03/17/segmentation02.html">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="Python, Jupyter, ESPNet, Semantic Segmentation">
    <meta property="article:tag" content="Python">
    <meta name="google-site-verification" content="v84F7EpkTSoxgy7bMoDugYVlMSDZ4mXp9mddQiYAl5w">
    <link rel="preload" href="/hamlet_engineer/assets/css/0.styles.6cfb13ef.css" as="style"><link rel="preload" href="/hamlet_engineer/assets/js/app.f13e2790.js" as="script"><link rel="preload" href="/hamlet_engineer/assets/js/14.900c8f45.js" as="script"><link rel="preload" href="/hamlet_engineer/assets/js/6.4e1cfbeb.js" as="script"><link rel="prefetch" href="/hamlet_engineer/assets/js/1.61b38fa0.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/10.8741afb4.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/11.b3440547.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/12.71b31cd5.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/13.75bc6529.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/15.d0e3339d.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/16.9f18ff20.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/17.d2929e5f.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/18.5c7b2348.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/19.1436811f.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/20.19ff0f42.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/21.0815251b.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/22.a57460e0.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/23.67adb0f1.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/24.d09e5fb4.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/25.06732c84.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/26.6c9324b2.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/27.7e3445ab.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/28.0fe972ab.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/29.3271c27f.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/3.93105848.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/30.1aa48cc1.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/31.37ac43a5.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/32.1396636b.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/33.8813ed93.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/34.70a629a4.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/35.c36e2680.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/36.c3dc9087.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/4.588a0e8c.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/5.47052a5c.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/7.b1170ebb.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/8.1bef8799.js"><link rel="prefetch" href="/hamlet_engineer/assets/js/9.3470beed.js">
    <link rel="stylesheet" href="/hamlet_engineer/assets/css/0.styles.6cfb13ef.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-meteorlxy"><header class="header" data-v-7a046aea><div data-v-e4145d0a data-v-7a046aea><nav class="navbar" data-v-e4145d0a><div class="container" data-v-e4145d0a><a href="/hamlet_engineer/" class="router-link-active" data-v-e4145d0a><span class="navbar-site-name" data-v-e4145d0a>
          ハムレット型エンジニアのカンニングノート
        </span></a> <div class="navbar-toggler" data-v-e4145d0a><svg class="icon" style="font-size:1.2em;" data-v-e4145d0a data-v-e4145d0a><title data-v-e4145d0a data-v-e4145d0a>menu</title><use xlink:href="#icon-menu" data-v-e4145d0a data-v-e4145d0a></use></svg></div> <div class="navbar-links" data-v-e4145d0a><a href="/hamlet_engineer/" class="navbar-link" data-v-e4145d0a>
            ホーム
          </a><a href="/hamlet_engineer/posts/" class="navbar-link router-link-active" data-v-e4145d0a>
            記事検索
          </a><a href="/hamlet_engineer/custom-pages/" class="navbar-link" data-v-e4145d0a>
            雑記
          </a></div></div></nav> <div class="navbar-holder" style="display:none;" data-v-e4145d0a></div></div> <div class="banner" data-v-98d6aa8c data-v-7a046aea data-v-7a046aea><div class="container" data-v-98d6aa8c><div class="center" data-v-98d6aa8c><h1 data-v-98d6aa8c data-v-7a046aea>
          Python, ESPNetでオリジナルデータを学習しSemantic Segmentationを実施する(データ生成編)
        </h1></div></div></div></header> <div class="container clearfix show-aside" data-v-4dd605a1 data-v-4dd605a1><main class="main" data-v-4dd605a1><div class="post" data-v-4dd605a1 data-v-4dd605a1><section class="post-meta main-div" data-v-4e23451f><section class="post-date clearfix" data-v-4e23451f><span class="create-date" data-v-4e23451f>
      作成日 : 2021-03-17
    </span> <span class="update-date" data-v-4e23451f>
      更新日 : 2021-03-18
    </span></section> <section class="post-links" data-v-4e23451f><a href="/hamlet_engineer/posts/2021/03/16/color-replace.html" class="post-link" data-v-4e23451f>
      前の記事へ : Python, OpenCVで指定した色の抽出と別の色への置換を実装する
    </a> <a href="/hamlet_engineer/posts/2021/03/19/segmentation03.html" class="post-link" data-v-4e23451f>
      次の記事へ : Python, ESPNetでオリジナルデータを学習しSemantic Segmentationを実施する(学習編)
    </a></section></section> <article class="main-div"><div class="post-content content content__default"><h2 id="python-espnetでオリジナルデータを学習しsemantic-segmentationを実施する-データ生成編"><a href="#python-espnetでオリジナルデータを学習しsemantic-segmentationを実施する-データ生成編" class="header-anchor">#</a> Python, ESPNetでオリジナルデータを学習しSemantic Segmentationを実施する(データ生成編)</h2> <p>Semantic Segmentationの中で軽いモデルであるESPNetv2を実装します．<br>
本稿ではCityscapesデータセットから人のみを抽出して，仮のオリジナルデータで学習に向けて，データ生成を実施します．<br>
今回はGoogle ColabとGoogle Driveを連携させて，notebook形式で実行してます．<br></p> <blockquote><p>Google Colaboratory（以下Google Colab）は、Google社が無料で提供している機械学習の教育や研究用の開発環境です。開発環境はJupyter Notebookに似たインターフェースを持ち、Pythonの主要なライブラリがプリインストールされています。<br>
引用元：<a href="https://interface.cqpub.co.jp/ail01/" target="_blank" rel="noopener noreferrer">Google Colabの使い方<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p>最終的に，人以外の背景を着色して，zoomのバーチャル背景機能のようなクロマキー合成を実装したいです．<br> <img src="/hamlet_engineer/assets/img/zoom.9e568f4d.jpg" alt=""></p> <h2 id="作業ディレクトリのファイル構成"><a href="#作業ディレクトリのファイル構成" class="header-anchor">#</a> 作業ディレクトリのファイル構成</h2> <p>ここでは，作業ディレクトリのsegmentation/EdgeNets/vision_datasetsのファイル構成を以下に示します．</p> <div class="language-init extra-class"><pre class="language-text"><code>segmentation/EdgeNets/vision_datasets
├── /cityscapes
├── /human_city &lt;- 仮オリジナルデータ
│   ├── train.txt
│   ├── val.txt
│   ├── /images
│   │   ├── /train
│   │   │   └── オリジナル画像
│   │   └── /val
│   │       └── オリジナル画像
│   └── /annotations
│       ├── /train
│       │   └── マスキング画像
│       └── /val
│           └── マスキング画像
│ 
└── create_data.ipynb &lt;- データ生成用ノートブック
</code></pre></div><h2 id="オリジナルデータの学習データセット"><a href="#オリジナルデータの学習データセット" class="header-anchor">#</a> オリジナルデータの学習データセット</h2> <p>今回はCityscapesデータセットから人だけを抽出して，仮オリジナルデータとします．<br>
オリジナルデータでESPNetv2を学習する場合は，データセットのファイル構成は以下の通りです．<br>
ここでは，データセット名前をhuman_cityとしています．<br></p> <div class="language-init extra-class"><pre class="language-text"><code>/human_city
├── train.txt
├── /images
│   ├── /train
│   │   └── オリジナル画像
│   └── /val
│       └── オリジナル画像
├── val.txt
└── /annotations
    ├── /train
    │   └── マスキング画像
    └── /val
        └── マスキング画像
</code></pre></div><p>オリジナル画像は実際の風景画像で，マスキング画像はクラスのIDに応じたRGBでマスキングした画像です．<br>
例として，背景はRGB=(0, 0, 0)，人のクラスIDが1とするならば人の領域はRGB=(1, 1, 1)，車のクラスIDが2とするならば車の領域はRGB=(2, 2, 2)として，マスキング画像を作成する．<br>
RGB=(0, 0, 0)の領域とRGB=(1, 1, 1)の領域は肉眼では判別不可能なので，最初は確認のためRGB=(0, 0, 255)など目立つ色で作成して，学習用に色を置換する方が個人的にお勧めします．<br></p> <p>オリジナル画像<br> <img src="/hamlet_engineer/assets/img/original_image.6b641a6c.png" alt=""><br></p> <p>人をRGB=(1, 1, 1)のマスキング画像(学習用)<br>
※肉眼じゃわからん・・・
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAoAAAAFACAYAAAAszc0KAAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAAoCgAwAEAAAAAQAAAUAAAAAAnCk5iQAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAEuVJREFUeAHt3eFqW+cWBFC75P1fWXXAhkDsIFln5DmaVSj0pvb23mu+H4PS3r6+vLxc3v70BwECBAgQIECAwIjAfyN3OpMAAQIECBAgQOBdQAH0FAgQIECAAAECYwIK4FjgziVAgAABAgQIKIDeAAECBAgQIEBgTEABHAvcuQQIECBAgAABBdAbIECAAAECBAiMCSiAY4E7lwABAgQIECCgAHoDBAgQIECAAIExAQVwLHDnEiBAgAABAgQUQG+AAAECBAgQIDAmoACOBe5cAgQIECBAgIAC6A0QIECAAAECBMYEFMCxwJ1LgAABAgQIEFAAvQECBAgQIECAwJiAAjgWuHMJECBAgAABAgqgN0CAAAECBAgQGBNQAMcCdy4BAgQIECBAQAH0BggQIECAAAECYwIK4FjgziVAgAABAgQIKIDeAAECBAgQIEBgTEABHAvcuQQIECBAgAABBdAbIECAAAECBAiMCSiAY4E7lwABAgQIECCgAHoDBAgQIECAAIExAQVwLHDnEiBAgAABAgQUQG+AAAECBAgQIDAmoACOBe5cAgQIECBAgIAC6A0QIECAAAECBMYEFMCxwJ1LgAABAgQIEFAAvQECBAgQIECAwJiAAjgWuHMJECBAgAABAgqgN0CAAAECBAgQGBNQAMcCdy4BAgQIECBAQAH0BggQIECAAAECYwIK4FjgziVAgAABAgQIKIDeAAECBAgQIEBgTEABHAvcuQQIECBAgAABBdAbIECAAAECBAiMCSiAY4E7lwABAgQIECCgAHoDBAgQIECAAIExAQVwLHDnEiBAgAABAgQUQG+AAAECBAgQIDAmoACOBe5cAgQIECBAgIAC6A0QIECAAAECBMYEFMCxwJ1LgAABAgQIEFAAvQECBAgQIECAwJiAAjgWuHMJECBAgAABAgqgN0CAAAECBAgQGBNQAMcCdy4BAgQIECBAQAH0BggQIECAAAECYwIK4FjgziVAgAABAgQIKIDeAAECBAgQIEBgTEABHAvcuQQIECBAgAABBdAbIECAAAECBAiMCSiAY4E7lwABAgQIECCgAHoDBAgQIECAAIExAQVwLHDnEiBAgAABAgQUQG+AAAECBAgQIDAmoACOBe5cAgQIECBAgIAC6A0QIECAAAECBMYEFMCxwJ1LgAABAgQIEFAAvQECBAgQIECAwJiAAjgWuHMJECBAgAABAgqgN0CAAAECBAgQGBNQAMcCdy4BAgQIECBAQAH0BggQIECAAAECYwIK4FjgziVAgAABAgQIKIDeAAECBAgQIEBgTEABHAvcuQQIECBAgAABBdAbIECAAAECBAiMCSiAY4E7lwABAgQIECCgAHoDBAgQIECAAIExAQVwLHDnEiBAgAABAgQUQG+AAAECBAgQIDAmoACOBe5cAgQIECBAgIAC6A0QIECAAAECBMYEFMCxwJ1LgAABAgQIEFAAvQECBAgQIECAwJiAAjgWuHMJECBAgAABAgqgN0CAAAECBAgQGBNQAMcCdy4BAgQIECBAQAH0BggQIECAAAECYwIK4FjgziVAgAABAgQIKIDeAAECBAgQIEBgTEABHAvcuQQIECBAgAABBdAbIECAAAECBAiMCSiAY4E7lwABAgQIECCgAHoDBAgQIECAAIExAQVwLHDnEiBAgAABAgQUQG+AAAECBAgQIDAmoACOBe5cAgQIECBAgIAC6A0QIECAAAECBMYEFMCxwJ1LgAABAgQIEFAAvQECBAgQIECAwJiAAjgWuHMJECBAgAABAgqgN0CAAAECBAgQGBNQAMcCdy4BAgQIECBAQAH0BggQIECAAAECYwIK4FjgziVAgAABAgQIKIDeAAECBAgQIEBgTEABHAvcuQQIECBAgAABBdAbIECAAAECBAiMCSiAY4E7lwABAgQIECCgAHoDBAgQIECAAIExAQVwLHDnEiBAgAABAgQUQG+AAAECBAgQIDAmoACOBe5cAgQIECBAgIAC6A0QIECAAAECBMYEFMCxwJ1LgAABAgQIEFAAvQECBAgQIECAwJiAAjgWuHMJECBAgAABAgqgN0CAAAECBAgQGBNQAMcCdy4BAgQIECBAQAH0BggQIECAAAECYwIK4FjgziVAgAABAgQIKIDeAAECBAgQIEBgTODX2L3OJUCAAAECBIoFXl9f/9rucrn89Wt+4T4BnwDe5+e7CRAgQIAAgYMEPit/v0d/9esH/djJMQrgZOyOJkCAAAECBJYFFMDl9N1OgAABAgQITAoogJOxO5oAAQIECBBYFlAAl9N3OwECBAgQOIGAfwnk+JAUwONNTSRAgAABAgRuFPjqX/RQ/m6EvPLLFcAroXwZAQIECBAgkBFQ/jKu/5qqAP5Lx98jQIAAAQIECDyhgAL4hKE6iQABAgQInEXgq0//zrL/WfdUAM+anL0JECBAgAABAt8UUAC/CefbCBAgQIAAgfsEfPp3n989360A3qPnewkQIECAAAECJxRQAE8YmpUJECBAgAABAvcIKID36PleAgQIECBA4FsCfvv3W2yHfZMCeBilQQQIECBAgACBcwgogOfIyZYECBAgQIAAgcMEFMDDKA0iQIAAAQIErhHw27/XKGW/RgHM+ppOgAABAgQIEKgTUADrIrEQAQIECBB4XgGf/nVkqwB25GALAgQIECBA4A+By+Xyx//yl0cLKIBHi5pHgAABAgQIECgXUADLA7IeAQIECBAgQOBoAQXwaFHzCBAgQIAAAQLlAgpgeUDWI0CAAAECBAgcLaAAHi1qHgECBAgQIECgXEABLA/IegQIECBAgACBowUUwKNFzSNAgAABAgQIlAsogOUBWY8AAQIECCwK+D+MzqauAGZ9TSdAgAABAgTeBZS6nqegAPZkYRMCBAgQIECAwEMEFMCHMPshBAgQIECAwC0C/lNwt2jd/rUK4O1mvoMAAQIECBAgcGoBBfDU8VmeAAECBAicQ+CWf/7Pp3/5TBXAvLGfQIAAAQIE5gWUuq4noAB25WEbAgQIECAwLaAoPib+X4/5MX4KAQIECBAgsCrw2W//fhS9z/7eqtMj7/YJ4CO1/SwCBAgQIEDg5aP8ofg5AQXw5+z9ZAIECBAgMCngU7+fj10B/PkMbECAAAECBJ5a4NpP/K79uqfGetBxCuCDoP0YAgQIECCwLHBNufPJ4ONeiAL4OGs/iQABAgQIEHgX+KrsffXr4I4VeH0bdzl2pGkECBAgQIAAgc8FPgre708EP/768698KyhvX+OPjIACmHE1lQABAgQIECBQK+C3gGujsRgBAgQIECBAICOgAGZcTSVAgAABAgQI1AoogLXRWIwAAQIECBAgkBFQADOuphIgQIAAAQIEagUUwNpoLEaAAAECBAgQyAgogBlXUwkQIECAAAECtQIKYG00FiNAgAABAgQIZAQUwIyrqQQIECBAgACBWgEFsDYaixEgQIAAAQIEMgIKYMbVVAIECBAgQIBArYACWBuNxQgQIECAAAECGQEFMONqKgECBAgQIECgVkABrI3GYgQIECBAgACBjIACmHE1lQABAgQIECBQK6AA1kZjMQIECBAgQIBARkABzLiaSoAAAQIECBCoFVAAa6OxGAECBAgQIEAgI6AAZlxNJUCAAAECBAjUCiiAtdFYjAABAgQIECCQEVAAM66mEiBAgAABAgRqBRTA2mgsRoAAAQIECBDICCiAGVdTCRAgQIAAAQK1AgpgbTQWI0CAAAECBAhkBBTAjKupBAgQIECAAIFaAQWwNhqLESBAgAABAgQyAgpgxtVUAgQIECBAgECtgAJYG43FCBAgQIAAAQIZAQUw42oqAQIECBAgQKBWQAGsjcZiBAgQIECAAIGMgAKYcTWVAAECBAgQIFAroADWRmMxAgQIECBAgEBGQAHMuJpKgAABAgQIEKgVUABro7EYAQIECBAgQCAjoABmXE0lQIAAAQIECNQKKIC10ViMAAECBAgQIJARUAAzrqYSIECAAAECBGoFFMDaaCxGgAABAgQIEMgIKIAZV1MJECBAgAABArUCCmBtNBYjQIAAAQIECGQEFMCMq6kECBAgQIAAgVoBBbA2GosRIECAAAECBDICCmDG1VQCBAgQIECAQK2AAlgbjcUIECBAgAABAhkBBTDjaioBAgQIECBAoFZAAayNxmIECBAgQIAAgYyAAphxNZUAAQIECBAgUCugANZGYzECBAgQIECAQEZAAcy4mkqAAAECBAgQqBVQAGujsRgBAgQIECBAICOgAGZcTSVAgAABAgQI1AoogLXRWIwAAQIECBAgkBFQADOuphIgQIAAAQIEagUUwNpoLEaAAAECBAgQyAgogBlXUwkQIECAAAECtQIKYG00FiNAgAABAgQIZAQUwIyrqQQIECBAgACBWgEFsDYaixEgQIAAAQIEMgIKYMbVVAIECBAgQIBArYACWBuNxQgQIECAAAECGQEFMONqKgECBAgQIECgVkABrI3GYgQIECBAgACBjIACmHE1lQABAgQIECBQK6AA1kZjMQIECBAgQIBARkABzLiaSoAAAQIECBCoFVAAa6OxGAECBAgQIEAgI6AAZlxNJUCAAAECBAjUCiiAtdFYjAABAgQIECCQEVAAM66mEiBAgAABAgRqBRTA2mgsRoAAAQIECBDICCiAGVdTCRAgQIAAAQK1AgpgbTQWI0CAAAECBAhkBBTAjKupBAgQIECAAIFaAQWwNhqLESBAgAABAgQyAgpgxtVUAgQIECBAgECtgAJYG43FCBAgQIAAAQIZAQUw42oqAQIECBAgQKBWQAGsjcZiBAgQIECAAIGMgAKYcTWVAAECBAgQIFAroADWRmMxAgQIECBAgEBGQAHMuJpKgAABAgQIEKgVUABro7EYAQIECBAgQCAjoABmXE0lQIAAAQIECNQKKIC10ViMAAECBAgQIJARUAAzrqYSIECAAAECBGoFFMDaaCxGgAABAgQIEMgIKIAZV1MJECBAgAABArUCCmBtNBYjQIAAAQIECGQEFMCMq6kECBAgQIAAgVoBBbA2GosRIECAAAECBDICCmDG1VQCBAgQIECAQK2AAlgbjcUIECBAgAABAhkBBTDjaioBAgQIECBAoFZAAayNxmIECBAgQIAAgYyAAphxNZUAAQIECBAgUCugANZGYzECBAgQIECAQEZAAcy4mkqAAAECBAgQqBVQAGujsRgBAgQIECBAICOgAGZcTSVAgAABAgQI1AoogLXRWIwAAQIECBAgkBFQADOuphIgQIAAAQIEagUUwNpoLEaAAAECBAgQyAgogBlXUwkQIECAAAECtQIKYG00FiNAgAABAgQIZAQUwIyrqQQIECBAgACBWgEFsDYaixEgQIAAAQIEMgIKYMbVVAIECBAgQIBArYACWBuNxQgQIECAAAECGQEFMONqKgECBAgQIECgVkABrI3GYgQIECBAgACBjIACmHE1lQABAgQIECBQK6AA1kZjMQIECBAgQIBARkABzLiaSoAAAQIECBCoFVAAa6OxGAECBAgQIEAgI6AAZlxNJUCAAAECBAjUCiiAtdFYjAABAgQIECCQEVAAM66mEiBAgAABAgRqBRTA2mgsRoAAAQIECBDICCiAGVdTCRAgQIAAAQK1AgpgbTQWI0CAAAECBAhkBBTAjKupBAgQIECAAIFaAQWwNhqLESBAgAABAgQyAgpgxtVUAgQIECBAgECtgAJYG43FCBAgQIAAAQIZAQUw42oqAQIECBAgQKBWQAGsjcZiBAgQIECAAIGMgAKYcTWVAAECBAgQIFAroADWRmMxAgQIECBAgEBGQAHMuJpKgAABAgQIEKgVUABro7EYAQIECBAgQCAjoABmXE0lQIAAAQIECNQKKIC10ViMAAECBAgQIJARUAAzrqYSIECAAAECBGoFFMDaaCxGgAABAgQIEMgIKIAZV1MJECBAgAABArUCCmBtNBYjQIAAAQIECGQEFMCMq6kECBAgQIAAgVoBBbA2GosRIECAAAECBDICCmDG1VQCBAgQIECAQK2AAlgbjcUIECBAgAABAhkBBTDjaioBAgQIECBAoFZAAayNxmIECBAgQIAAgYyAAphxNZUAAQIECBAgUCugANZGYzECBAgQIECAQEZAAcy4mkqAAAECBAgQqBVQAGujsRgBAgQIECBAICOgAGZcTSVAgAABAgQI1AoogLXRWIwAAQIECBAgkBFQADOuphIgQIAAAQIEagUUwNpoLEaAAAECBAgQyAgogBlXUwkQIECAAAECtQIKYG00FiNAgAABAgQIZAQUwIyrqQQIECBAgACBWgEFsDYaixEgQIAAAQIEMgIKYMbVVAIECBAgQIBArYACWBuNxQgQIECAAAECGQEFMONqKgECBAgQIECgVkABrI3GYgQIECBAgACBjIACmHE1lQABAgQIECBQK6AA1kZjMQIECBAgQIBARuB/0j01jrgTSzIAAAAASUVORK5CYII=" alt=""><br></p> <p>人をRGB=(255, 0, 0)のマスキング画像(確認用)<br> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAoAAAAFACAYAAAAszc0KAAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAAoCgAwAEAAAAAQAAAUAAAAAAnCk5iQAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAGpVJREFUeAHt3cuPZNddB/DT1a+ZnvfD47cncSKEAeFFpBAhAQsQQjyEeC2IhGCDBFLA2YDEjhVrtmy84R9AgLICESFAsoQEIhArgSSWR7HHThg/enqmp7u6m3PuVGXaPd0zPf2rHvLz+ZTlflTf+s05n99ZfHVu3bpzpZSd+r8HAQIECBAgQIBAJwKjTuZpmgQIECBAgAABAhMBAdBSIECAAAECBAh0JiAAdtZw0yVAgAABAgQICIDWAAECBAgQIECgMwEBsLOGmy4BAgQIECBAQAC0BggQIECAAAECnQkIgJ013HQJECBAgAABAgKgNUCAAAECBAgQ6ExAAOys4aZLgAABAgQIEBAArQECBAgQIECAQGcCAmBnDTddAgQIECBAgIAAaA0QIECAAAECBDoTEAA7a7jpEiBAgAABAgQEQGuAAAECBAgQINCZgADYWcNNlwABAgQIECAgAFoDBAgQIECAAIHOBATAzhpuugQIECBAgAABAdAaIECAAAECBAh0JiAAdtZw0yVAgAABAgQICIDWAAECBAgQIECgMwEBsLOGmy4BAgQIECBAQAC0BggQIECAAAECnQkIgJ013HQJECBAgAABAgKgNUCAAAECBAgQ6ExAAOys4aZLgAABAgQIEBAArQECBAgQIECAQGcCAmBnDTddAgQIECBAgIAAaA0QIECAAAECBDoTEAA7a7jpEiBAgAABAgQEQGuAAAECBAgQINCZgADYWcNNlwABAgQIECAgAFoDBAgQIECAAIHOBATAzhpuugQIECBAgAABAdAaIECAAAECBAh0JiAAdtZw0yVAgAABAgQICIDWAAECBAgQIECgMwEBsLOGmy4BAgQIECBAQAC0BggQIECAAAECnQkIgJ013HQJECBAgAABAgKgNUCAAAECBAgQ6ExAAOys4aZLgAABAgQIEBAArQECBAgQIECAQGcCAmBnDTddAgQIECBAgIAAaA0QIECAAAECBDoTEAA7a7jpEiBAgAABAgQEQGuAAAECBAgQINCZgADYWcNNlwABAgQIECAgAFoDBAgQIECAAIHOBATAzhpuugQIECBAgAABAdAaIECAAAECBAh0JiAAdtZw0yVAgAABAgQICIDWAAECBAgQIECgMwEBsLOGmy4BAgQIECBAQAC0BggQIECAAAECnQkIgJ013HQJECBAgAABAgKgNUCAAAECBAgQ6ExAAOys4aZLgAABAgQIEBAArQECBAgQIECAQGcCAmBnDTddAgQIECBAgIAAaA0QIECAAAECBDoTEAA7a7jpEiBAgAABAgQEQGuAAAECBAgQINCZgADYWcNNlwABAgQIECAgAFoDBAgQIECAAIHOBATAzhpuugQIECBAgAABAdAaIECAAAECBAh0JiAAdtZw0yVAgAABAgQICIDWAAECBAgQIECgMwEBsLOGmy4BAgQIECBAQAC0BggQIECAAAECnQkIgJ013HQJECBAgAABAgKgNUCAAAECBAgQ6ExAAOys4aZLgAABAgQIEBAArQECBAgQIECAQGcCAmBnDTddAgQIECBAgIAAaA0QIECAAAECBDoTEAA7a7jpEiBAgAABAgQEQGuAAAECBAgQINCZgADYWcNNlwABAgQIECAgAFoDBAgQ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AQEwV7+MlgABAgQIECAQFhAAw4QKECBAgAABAgRyCQiAufpltAQIECBAgACBsIAAGCZUgAABAgQIECCQS0AAzNUvoyVAgAABAgQIhAUEwDChAgQIECBAgACBXAICYK5+GS0BAgQIECBAICwgAIYJFSBAgAABAgQI5BIQAHP1y2gJECBAgAABAmEBATBMqAABAgQIECBAIJeAAJirX0ZLgAABAgQIEAgLCIBhQgUIECBAgAABArkEBMBc/TJaAgQIECBAgEBYQAAMEypAgAABAgQIEMglIADm6pfREiBAgAABAgTCAgJgmFABAgQIECBAgEAuAQEwV7+MlgABAgQIECAQFhAAw4QKECBAgAABAgRyCQiAufpltAQIECBAgACBsIAAGCZUgAABAgQIECCQS0AAzNUvoyVAgAABAgQIhAUEwDChAgQIECBAgACBXAICYK5+GS0BAgQIECBAICwgAIYJFSBAgAABAgQI5BIQAHP1y2gJECBAgAABAmEBATBMqAABAgQIECBAIJeAAJirX0ZLgAABAgQIEAgLCIBhQgUIECBAgAABArkEBMBc/TJaAgQIECBAgEBYQAAMEypAgAABAgQIEMglIADm6pfREiBAgAABAgTCAgJgmFABAgQIECBAgEAuAQEwV7+MlgABAgQIECAQFhAAw4QKECBAgAABAgRyCQiAufpltAQIECBAgACBsIAAGCZUgAABAgQIECCQS0AAzNUvoyVAgAABAgQIhAUEwDChAgQIECBAgACBXAICYK5+GS0BAgQIECBAICwgAIYJFSBAgAABAgQI5BIQAHP1y2gJECBAgAABAmEBATBMqAABAgQIECBAIJeAAJirX0ZLgAABAgQIEAgLCIBhQgUIECBAgAABArkEBMBc/TJaAgQIECBAgEBYQAAMEypAgAABAgQIEMglIADm6pfREiBAgAABAgTCAgJgmFABAgQIECBAgEAuAQEwV7+MlgABAgQIECAQFhAAw4QKECBAgAABAgRyCQiAufpltAQIECBAgACBsIAAGCZUgAABAgQIECCQS0AAzNUvoyVAgAABAgQIhAUEwDChAgQIECBAgACBXAICYK5+GS0BAgQIECBAICwgAIYJFSBAgAABAgQI5BIQAHP1y2gJECBAgAABAmEBATBMqAABAgQIECBAIJeAAJirX0ZLgAABAgQIEAgLCIBhQgUIECBAgAABArkEBMBc/TJaAgQIECBAgEBYQAAMEypAgAABAgQIEMglIADm6pfREiBAgAABAgTCAgJgmFABAgQIECBAgEAuAQEwV7+MlgABAgQIECAQFhAAw4QKECBAgAABAgRyCQiAufpltAQIECBAgACBsIAAGCZUgAABAgQIECCQS0AAzNUvoyVAgAABAgQIhAUEwDChAgQIECBAgACBXAICYK5+GS0BAgQIECBAICwgAIYJFSBAgAABAgQI5BIQAHP1y2gJECBAgAABAmEBATBMqAABAgQIECBAIJeAAJirX0ZLgAABAgQIEAgLCIBhQgUIECBAgAABArkEBMBc/TJaAgQIECBAgEBYQAAMEypAgAABAgQIEMglIADm6pfREiBAgAABAgTCAgJgmFABAgQIECBAgEAuAQEwV7+MlgABAgQIECAQFhAAw4QKECBAgAABAgRyCQiAufpltAQIECBAgACBsIAAGCZUgAABAgQIECCQS0AAzNUvoyVAgAABAgQIhAUEwDChAgQIECBAgACBXAICYK5+GS0BAgQIECBAICwgAIYJFSBAgAABAgQI5BIQAHP1y2gJECBAgAABAmEBATBMqAABAgQIECBAIJeAAJirX0ZLgAABAgQIEAgLCIBhQgUIECBAgAABArkEBMBc/TJaAgQIECBAgEBYQAAMEypAgAABAgQIEMglIADm6pfREiBAgAABAgTCAgJgmFABAgQIECBAgEAuAQEwV7+MlgABAgQIECAQFhAAw4QKECBAgAABAgRyCQiAufpltAQIECBAgACBsIAAGCZUgAABAgQIECCQS0AAzNUvoyVAgAABAgQIhAUEwDChAgQIECBAgACBXAICYK5+GS0BAgQIECBAICwgAIYJFSBAgAABAgQI5BIQAHP1y2gJECBAgAABAmEBATBMqAABAgQIECBAIJeAAJirX0ZLgAABAgQIEAgLCIBhQgUIECBAgAABArkEBMBc/TJaAgQIECBAgEBYQAAMEypAgAABAgQIEMglIADm6pfREiBAgAABAgTCAgJgmFABAgQIECBAgEAuAQEwV7+MlgABAgQIECAQFhAAw4QKECBAgAABAgRyCQiAufpltAQIECBAgACBsIAAGCZUgAABAgQIECCQS0AAzNUvoyVAgAABAgQIhAUEwDChAgQIECBAgACBXAICYK5+GS0BAgQIECBAICwgAIYJFSBAgAABAgQI5BIQAHP1y2gJECBAgAABAmEBATBMqAABAgQIECBAIJeAAJirX0ZLgAABAgQIEAgLCIBhQgUIECBAgAABArkEBMBc/TJaAgQIECBAgEBYQAAMEypAgAABAgQIEMglIADm6pfREiBAgAABAgTCAgJgmFABAgQIECBAgEAuAQEwV7+MlgABAgQIECAQFhAAw4QKECBAgAABAgRyCfwfrDMbufKlENIAAAAASUVORK5CYII=" alt=""></p> <h2 id="仮オリジナルデータの生成"><a href="#仮オリジナルデータの生成" class="header-anchor">#</a> 仮オリジナルデータの生成</h2> <p>Cityscapesデータセットから人だけを抽出して，仮オリジナルデータを生成します．<br>
Cityscapesデータセットのダウンロードは，<a href="https://hirasu1231.github.io/hamlet_engineer/posts/2021/03/15/segmentation01.html" target="_blank" rel="noopener noreferrer">Python, ESPNetでCityscapesデータセットでSemantic Segmentationの学習を実施する<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>を参照ください．</p> <h3 id="作業ディレクトリの移動"><a href="#作業ディレクトリの移動" class="header-anchor">#</a> 作業ディレクトリの移動</h3> <p>作業ディレクトリは，Cityscapesデータセットのダウンロードで自動で生成される/EdgeNets/vision_datasetsとしています．</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># Google ColabとGoogle Driveを連携</span>
<span class="token keyword">from</span> google<span class="token punctuation">.</span>colab <span class="token keyword">import</span> drive
drive<span class="token punctuation">.</span>mount<span class="token punctuation">(</span><span class="token string">'/content/drive'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># ディレクトリの移動</span>
<span class="token operator">%</span>cd <span class="token operator">/</span>content<span class="token operator">/</span>drive<span class="token operator">/</span>My\ Drive<span class="token operator">/</span>segmentation<span class="token operator">/</span>EdgeNets<span class="token operator">/</span>vision_datasets
</code></pre></div><h3 id="cityscapesデータセットの整理"><a href="#cityscapesデータセットの整理" class="header-anchor">#</a> Cityscapesデータセットの整理</h3> <p>仮オリジナルデータの生成について，Cityscapesデータセットからオリジナル画像とカラーマスキング画像を使用します．<br>
Cityscapesデータセットは，オリジナル画像とカラーマスキング画像は，以下の画像名となっています．<br></p> <div class="language- extra-class"><pre class="language-text"><code>オリジナル画像：/cityscapes/leftImg8bit/train or val/＊/＊_leftImg8bit.png
カラーマスキング画像：/cityscapes/gtFine/train or val/＊/＊_gtFine_color.png
</code></pre></div><p>オリジナル画像<br> <img src="/hamlet_engineer/assets/img/original_image.6b641a6c.png" alt=""><br></p> <p>カラーマスキング画像<br> <img src="/hamlet_engineer/assets/img/color_mask_image.b5a6373b.png" alt=""></p> <h3 id="入力画像のリスト作成"><a href="#入力画像のリスト作成" class="header-anchor">#</a> 入力画像のリスト作成</h3> <p>画像を読み込ませるために，画像パスリストのtxtファイルも作成する必要があります．(train.txt, val.txt)</p> <div class="language-init extra-class"><pre class="language-text"><code># train.txt, val.txt
# オリジナル画像, マスキング画像
train/rgb/zurich_000072_000019_leftImg8bit.png,train/label/zurich_000072_000019_gtFine_color.png
train/rgb/zurich_000003_000019_leftImg8bit.png,train/label/zurich_000003_000019_gtFine_color.png
train/rgb/zurich_000116_000019_leftImg8bit.png,train/label/zurich_000116_000019_gtFine_color.png
train/rgb/zurich_000119_000019_leftImg8bit.png,train/label/zurich_000119_000019_gtFine_color.png
train/rgb/zurich_000032_000019_leftImg8bit.png,train/label/zurich_000032_000019_gtFine_color.png
</code></pre></div><h3 id="仮オリジナルデータ生成の工程"><a href="#仮オリジナルデータ生成の工程" class="header-anchor">#</a> 仮オリジナルデータ生成の工程</h3> <p>人を抽出する工程は，カラーマスキング画像の色を，人以外をBGR(0, 0, 0)，人をBGR(1, 1, 1)に置換して実施してます．<br>
カラー画像で特定の色を置換する場合は，本サイトの「<a href="https://hirasu1231.github.io/hamlet_engineer/posts/2021/03/16/color-replace.html" target="_blank" rel="noopener noreferrer">Python, OpenCVで指定した色の抽出と別の色への置換を実装する<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>」を参照ください．<br>
以下のコードでは一通りの工程をdef文でまとめました．</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> os
<span class="token keyword">import</span> glob
<span class="token keyword">import</span> shutil
<span class="token keyword">import</span> cv2
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token comment"># 学習データセットのディレクトリの作成</span>
<span class="token keyword">def</span> <span class="token function">make_dataset_dir</span><span class="token punctuation">(</span>dataset_name<span class="token punctuation">)</span><span class="token punctuation">:</span>
    os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span><span class="token string">'{}/images/train/'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>dataset_name<span class="token punctuation">)</span><span class="token punctuation">,</span> exist_ok<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token comment"># 訓練用オリジナル画像</span>
    os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span><span class="token string">'{}/annotations/train/'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>dataset_name<span class="token punctuation">)</span><span class="token punctuation">,</span> exist_ok<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token comment"># 訓練用マスキング画像</span>
    os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span><span class="token string">'{}/images/val/'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>dataset_name<span class="token punctuation">)</span><span class="token punctuation">,</span> exist_ok<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token comment"># 評価用オリジナル画像</span>
    os<span class="token punctuation">.</span>makedirs<span class="token punctuation">(</span><span class="token string">'{}/annotations/val/'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>dataset_name<span class="token punctuation">)</span><span class="token punctuation">,</span> exist_ok<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span> <span class="token comment"># 評価用マスキング画像</span>
<span class="token comment"># オリジナル画像をコピー</span>
<span class="token keyword">def</span> <span class="token function">copy_org_image</span><span class="token punctuation">(</span>color_image_path<span class="token punctuation">,</span> data_type<span class="token punctuation">,</span> dataset_name<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># カラーマスキング画像の名前</span>
    color_name <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>basename<span class="token punctuation">(</span>color_image_path<span class="token punctuation">)</span>
    <span class="token comment"># データのディレクトリ名(データを取得した都市名)</span>
    city_name <span class="token operator">=</span> color_name<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    <span class="token comment"># オリジナル画像の名前とパス</span>
    org_name <span class="token operator">=</span> color_name<span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">'_gtFine_color.png'</span><span class="token punctuation">,</span> <span class="token string">'_leftImg8bit.png'</span><span class="token punctuation">)</span>
    org_path <span class="token operator">=</span> <span class="token string">'./cityscapes/leftImg8bit/{0}/{1}/{2}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>data_type<span class="token punctuation">,</span> city_name<span class="token punctuation">,</span> org_name<span class="token punctuation">)</span>
    <span class="token comment"># オリジナル画像をコピー</span>
    shutil<span class="token punctuation">.</span>copy<span class="token punctuation">(</span>org_path<span class="token punctuation">,</span> <span class="token string">'./{0}/images/{1}/{2}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>dataset_name<span class="token punctuation">,</span> data_type<span class="token punctuation">,</span> org_name<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">'{0}/{1}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>data_type<span class="token punctuation">,</span> org_name<span class="token punctuation">)</span>
<span class="token comment"># 画像の特定の色を抽出</span>
<span class="token keyword">def</span> <span class="token function">color_extract</span><span class="token punctuation">(</span>cv2_img<span class="token punctuation">,</span> color1<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># BGRでの色抽出</span>
    bgrLower <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>color1<span class="token punctuation">)</span> <span class="token comment"># 抽出する色の下限(BGR)</span>
    bgrUpper <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>color1<span class="token punctuation">)</span> <span class="token comment"># 抽出する色の上限(BGR)</span>
    img_mask <span class="token operator">=</span> cv2<span class="token punctuation">.</span>inRange<span class="token punctuation">(</span>cv2_img<span class="token punctuation">,</span> bgrLower<span class="token punctuation">,</span> bgrUpper<span class="token punctuation">)</span> <span class="token comment"># BGRからマスクを作成</span>
    ex_img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>bitwise_and<span class="token punctuation">(</span>cv2_img<span class="token punctuation">,</span> cv2_img<span class="token punctuation">,</span> mask<span class="token operator">=</span>img_mask<span class="token punctuation">)</span> <span class="token comment"># 元画像とマスクを合成</span>
    <span class="token keyword">return</span> ex_img
<span class="token comment"># 画像の特定の色を別の色に置換</span>
<span class="token keyword">def</span> <span class="token function">color_replace</span><span class="token punctuation">(</span>ex_img<span class="token punctuation">,</span> color1<span class="token punctuation">,</span> color2<span class="token punctuation">)</span><span class="token punctuation">:</span>
    before_color <span class="token operator">=</span> color1
    after_color <span class="token operator">=</span> color2
    ex_img<span class="token punctuation">[</span>np<span class="token punctuation">.</span>where<span class="token punctuation">(</span><span class="token punctuation">(</span>ex_img <span class="token operator">==</span> before_color<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> after_color
    <span class="token keyword">return</span> ex_img
<span class="token comment"># 学習用マスキング画像を出力</span>
<span class="token keyword">def</span> <span class="token function">replace_masking</span><span class="token punctuation">(</span>cv2_img<span class="token punctuation">,</span> data_type<span class="token punctuation">,</span> dataset_name<span class="token punctuation">,</span> color1<span class="token punctuation">,</span> color2<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 学習用マスキング画像を生成</span>
    ex_img <span class="token operator">=</span> color_extract<span class="token punctuation">(</span>cv2_img<span class="token punctuation">,</span> color1<span class="token punctuation">)</span>
    mask_img <span class="token operator">=</span> color_replace<span class="token punctuation">(</span>ex_img<span class="token punctuation">,</span> color1<span class="token punctuation">,</span> color2<span class="token punctuation">)</span>
    <span class="token comment"># グレースケール化</span>
    mask_img_gray <span class="token operator">=</span> cv2<span class="token punctuation">.</span>cvtColor<span class="token punctuation">(</span>mask_img<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span>COLOR_BGR2GRAY<span class="token punctuation">)</span>
    <span class="token comment"># マスキング画像の出力</span>
    color_name <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>basename<span class="token punctuation">(</span>color_image<span class="token punctuation">)</span>
    mask_path <span class="token operator">=</span> <span class="token string">'./{0}/annotations/{1}/{2}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>dataset_name<span class="token punctuation">,</span> data_type<span class="token punctuation">,</span> color_name<span class="token punctuation">)</span>
    cv2<span class="token punctuation">.</span>imwrite<span class="token punctuation">(</span>mask_path<span class="token punctuation">,</span> mask_img_gray<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token string">'{0}/{1}'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>data_type<span class="token punctuation">,</span> color_name<span class="token punctuation">)</span>
<span class="token comment"># パスリストのtxtファイル作成</span>
<span class="token keyword">def</span> <span class="token function">create_txtfile</span><span class="token punctuation">(</span>txt_path<span class="token punctuation">,</span> txt<span class="token punctuation">,</span> txt_flag<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 新規作成</span>
    <span class="token keyword">if</span> <span class="token keyword">not</span> txt_flag<span class="token punctuation">:</span>
        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>txt_path<span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'w'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>txt<span class="token punctuation">)</span>
    <span class="token comment"># 追記</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>txt_path<span class="token punctuation">,</span> mode<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>txt<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token number">1</span>
</code></pre></div><h3 id="仮オリジナルデータ生成の実行"><a href="#仮オリジナルデータ生成の実行" class="header-anchor">#</a> 仮オリジナルデータ生成の実行</h3> <p>以下のコードで仮オリジナルデータ生成を実行します．<br> <a href="https://github.com/mcordts/cityscapesScripts/blob/master/cityscapesscripts/helpers/labels.py" target="_blank" rel="noopener noreferrer">cityscapesScripts/cityscapesscripts/helpers/labels.py<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>より人のマスキングのRGBは(220, 20, 60)となります．<br>
カラーマスキング画像を読み込んで，人のRGB=(220, 20, 60)の箇所があれば，学習用データセットとして整形するようにしています．</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> os
<span class="token keyword">import</span> glob
<span class="token keyword">import</span> cv2
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token comment"># 学習データセットのディレクトリの作成</span>
dataset_name <span class="token operator">=</span> <span class="token string">'human_city'</span>
make_dataset_dir<span class="token punctuation">(</span>dataset_name<span class="token punctuation">)</span>
<span class="token comment"># Cityscapes</span>
data_type <span class="token operator">=</span> <span class="token string">'train'</span>
<span class="token comment"># カラーマスキング</span>
color_images <span class="token operator">=</span> glob<span class="token punctuation">.</span>glob<span class="token punctuation">(</span><span class="token string">'./cityscapes/gtFine/{}/*/*_gtFine_color.png'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>data_type<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># 人のマスキングカラー(BGR)</span>
human_color <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">220</span><span class="token punctuation">]</span>
label_color <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>
txt_flag <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">for</span> color_image <span class="token keyword">in</span> color_images<span class="token punctuation">:</span>
    <span class="token comment"># カラーマスキング画像の読み込み</span>
    img <span class="token operator">=</span> cv2<span class="token punctuation">.</span>imread<span class="token punctuation">(</span>color_image<span class="token punctuation">)</span>
    <span class="token comment"># 人の色があるか，判定</span>
    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>img<span class="token punctuation">[</span>np<span class="token punctuation">.</span>where<span class="token punctuation">(</span><span class="token punctuation">(</span>img <span class="token operator">==</span> human_color<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token comment"># 学習用マスキング画像を出力</span>
        txt_mask_path <span class="token operator">=</span> replace_masking<span class="token punctuation">(</span>img<span class="token punctuation">,</span> data_type<span class="token punctuation">,</span> dataset_name<span class="token punctuation">,</span> human_color<span class="token punctuation">,</span> label_color<span class="token punctuation">)</span>
        <span class="token comment"># オリジナル画像をコピー</span>
        txt_org_path <span class="token operator">=</span> copy_org_image<span class="token punctuation">(</span>color_image<span class="token punctuation">,</span> data_type<span class="token punctuation">,</span> dataset_name<span class="token punctuation">)</span>
        <span class="token comment"># パスリストのtxtファイル作成</span>
        txt_path <span class="token operator">=</span> <span class="token string">'./{0}/{1}.txt'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>dataset_name<span class="token punctuation">,</span> data_type<span class="token punctuation">)</span>
        txt <span class="token operator">=</span> <span class="token string">'{0},{1}\n'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>txt_org_path<span class="token punctuation">,</span> txt_mask_path<span class="token punctuation">)</span>
        txt_flag <span class="token operator">=</span> create_txtfile<span class="token punctuation">(</span>txt_path<span class="token punctuation">,</span> txt<span class="token punctuation">,</span> txt_flag<span class="token punctuation">)</span>
</code></pre></div><h2 id="まとめ"><a href="#まとめ" class="header-anchor">#</a> まとめ</h2> <p>Cityscapesデータセットから人のみを抽出して，仮のオリジナルデータで学習に向けて，データ生成を実施しました．<br>
次回からは本稿の仮オリジナルデータでの学習を実施します．</p> <h2 id="参考サイト"><a href="#参考サイト" class="header-anchor">#</a> 参考サイト</h2> <p><a href="https://github.com/sacmehta/EdgeNets" target="_blank" rel="noopener noreferrer">sacmehta/EdgeNets<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="https://github.com/sacmehta/EdgeNets/blob/master/README_Segmentation.md" target="_blank" rel="noopener noreferrer">sacmehta/EdgeNets/README_Segmentation.md<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://qiita.com/tokyokuma/items/37b1370ea7c84399fbb9" target="_blank" rel="noopener noreferrer">ESPNetで自作データセットを学習してセグメンテーション<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="https://rikoubou.hatenablog.com/entry/2019/02/21/190310" target="_blank" rel="noopener noreferrer">【python/OpenCV】画像の特定の色を抽出する方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="https://qiita.com/pashango2/items/d6dda5f07109ee5b6163" target="_blank" rel="noopener noreferrer">PIL/Pillowで画像の色を高速に置換する<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="http://ni4muraano.hatenablog.com/entry/2017/05/15/000000" target="_blank" rel="noopener noreferrer">【OpenCV】 forループを使わずに指定した色を別の色に変更する<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div></article> <section class="post-meta main-div" data-v-4e23451f><section class="post-date clearfix" data-v-4e23451f><span class="create-date" data-v-4e23451f>
      作成日 : 2021-03-17
    </span> <span class="update-date" data-v-4e23451f>
      更新日 : 2021-03-18
    </span></section> <section class="post-links" data-v-4e23451f><a href="/hamlet_engineer/posts/2021/03/16/color-replace.html" class="post-link" data-v-4e23451f>
      前の記事へ : Python, OpenCVで指定した色の抽出と別の色への置換を実装する
    </a> <a href="/hamlet_engineer/posts/2021/03/19/segmentation03.html" class="post-link" data-v-4e23451f>
      次の記事へ : Python, ESPNetでオリジナルデータを学習しSemantic Segmentationを実施する(学習編)
    </a></section></section> <div id="post-comments" class="main-div"><!----></div></div></main> <aside class="aside" data-v-4dd605a1><div class="info-card main-div" data-v-9d847660 data-v-4dd605a1><div class="info-card-header" data-v-9d847660><img src="/hamlet_engineer/img/hirasu.jpg" alt="hirasu1231" class="info-avatar" data-v-9d847660></div> <div class="info-card-body" data-v-9d847660><section class="info-nickname" data-v-9d847660>
      hirasu1231
    </section> <section class="info-desc" data-v-9d847660>ハムレット型：決断を下して行動に移るよりは、 むしろ懐疑や苦悩にこもってしまう思索的な性格．そんな精神療養中の元エンジニアです.</section> <section class="info-contact" data-v-9d847660><section data-v-9d847660><span title="Fukuoka, Japan" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>Fukuoka, Japan</title><use xlink:href="#icon-location" data-v-9d847660 data-v-9d847660></use></svg><span class="info-text" data-v-9d847660 data-v-9d847660>
          Fukuoka, Japan
        </span></span></section> <!----> <!----></section></div> <div class="info-card-footer" data-v-9d847660><section class="info-sns clearfix" data-v-9d847660><a href="https://twitter.com/hirasu1231" target="_blank" class="sns-link" data-v-9d847660><span title="Twitter: hirasu1231" class="sns-icon" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1.5em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>Twitter: hirasu1231</title><use xlink:href="#icon-twitter" data-v-9d847660 data-v-9d847660></use></svg></span></a><a href="https://github.com/hirasu1231" target="_blank" class="sns-link" data-v-9d847660><span title="GitHub: hirasu1231" class="sns-icon" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1.5em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>GitHub: hirasu1231</title><use xlink:href="#icon-github" data-v-9d847660 data-v-9d847660></use></svg></span></a></section></div></div> <div class="post-nav-card main-div" style="position:relative;top:0;width:0px;" data-v-4dd605a1><div class="post-nav-contents"><svg class="icon"><title>book</title><use xlink:href="#icon-book"></use></svg> <span>目次</span> <div class="post-nav-toc"><ul><li><a href="/hamlet_engineer/posts/2021/03/17/segmentation02.html#python-espnetでオリジナルデータを学習しsemantic-segmentationを実施する-データ生成編">Python, ESPNetでオリジナルデータを学習しSemantic Segmentationを実施する(データ生成編)</a></li><li><a href="/hamlet_engineer/posts/2021/03/17/segmentation02.html#作業ディレクトリのファイル構成">作業ディレクトリのファイル構成</a></li><li><a href="/hamlet_engineer/posts/2021/03/17/segmentation02.html#オリジナルデータの学習データセット">オリジナルデータの学習データセット</a></li><li><a href="/hamlet_engineer/posts/2021/03/17/segmentation02.html#仮オリジナルデータの生成">仮オリジナルデータの生成</a><ul><li><a href="/hamlet_engineer/posts/2021/03/17/segmentation02.html#作業ディレクトリの移動">作業ディレクトリの移動</a></li><li><a href="/hamlet_engineer/posts/2021/03/17/segmentation02.html#cityscapesデータセットの整理">Cityscapesデータセットの整理</a></li><li><a href="/hamlet_engineer/posts/2021/03/17/segmentation02.html#入力画像のリスト作成">入力画像のリスト作成</a></li><li><a href="/hamlet_engineer/posts/2021/03/17/segmentation02.html#仮オリジナルデータ生成の工程">仮オリジナルデータ生成の工程</a></li><li><a href="/hamlet_engineer/posts/2021/03/17/segmentation02.html#仮オリジナルデータ生成の実行">仮オリジナルデータ生成の実行</a></li></ul></li><li><a href="/hamlet_engineer/posts/2021/03/17/segmentation02.html#まとめ">まとめ</a></li><li><a href="/hamlet_engineer/posts/2021/03/17/segmentation02.html#参考サイト">参考サイト</a></li></ul></div></div> <div class="post-nav-comments"><svg class="icon"><title>comment</title><use xlink:href="#icon-comment"></use></svg> <a href="/hamlet_engineer/posts/2021/03/17/segmentation02.html#post-comments">
    </a></div></div></aside></div> <footer class="footer" data-v-1375e54c><p class="footer-sns-links" data-v-1375e54c><a href="https://twitter.com/hirasu1231" target="_blank" class="sns-link" data-v-1375e54c><span title="Twitter: hirasu1231" class="sns-icon" data-v-1375e54c data-v-1375e54c><svg class="icon" style="font-size:25px;" data-v-1375e54c data-v-1375e54c><title data-v-1375e54c data-v-1375e54c>Twitter: hirasu1231</title><use xlink:href="#icon-twitter" data-v-1375e54c data-v-1375e54c></use></svg></span></a><a href="https://github.com/hirasu1231" target="_blank" class="sns-link" data-v-1375e54c><span title="GitHub: hirasu1231" class="sns-icon" data-v-1375e54c data-v-1375e54c><svg class="icon" style="font-size:25px;" data-v-1375e54c data-v-1375e54c><title data-v-1375e54c data-v-1375e54c>GitHub: hirasu1231</title><use xlink:href="#icon-github" data-v-1375e54c data-v-1375e54c></use></svg></span></a></p> <p class="footer-text" data-v-1375e54c><span data-v-1375e54c>Powered by </span> <a href="https://github.com/vuejs/vuepress" target="_blank" data-v-1375e54c>
      VuePress
    </a> <span data-v-1375e54c> | </span> <a href="https://github.com/meteorlxy/vuepress-theme-meteorlxy" target="_blank" data-v-1375e54c>
        meteorlxy
      </a></p> <p class="footer-text" data-v-1375e54c>Copyright 2021 hirasu1231</p></footer></div><div class="global-ui"><!----><!----></div></div>
    <script src="/hamlet_engineer/assets/js/app.f13e2790.js" defer></script><script src="/hamlet_engineer/assets/js/14.900c8f45.js" defer></script><script src="/hamlet_engineer/assets/js/6.4e1cfbeb.js" defer></script>
  </body>
</html>
